(function(h,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue"),require("lucide-vue-next"),require("@/components/ui/button")):typeof define=="function"&&define.amd?define(["exports","vue","lucide-vue-next","@/components/ui/button"],o):(h=typeof globalThis<"u"?globalThis:h||self,o(h.SimpleModal={},h.Vue,h.LucideVueNext,h.button))})(this,function(h,o,N,Ne){"use strict";function xe(e){return typeof e=="string"}function ae(e){return Array.isArray(e)}function Se(e){return e!==null&&typeof e=="object"&&!ae(e)}function x(...e){const n=[];for(let t=0;t<e.length;t++){const l=e[t];if(l){if(xe(l))n.push(l);else if(ae(l))for(let s=0;s<l.length;s++){const a=x(l[s]);a&&n.push(a)}else if(Se(l))for(const s in l)l[s]&&n.push(s)}}return n.join(" ")}const Pe=e=>{const n=e;return n.install=function(t){t.component(n.displayName||n.name,e)},e};function S(e){return{type:Object,default:e}}function P(e){return{type:Boolean,default:e}}function ce(e){return{type:Function,default:e}}const Te=()=>({prefixCls:String,class:String,style:S(),rootClassName:String,visible:P(),destroyOnClose:P(),forceRender:P(),getContainer:{type:[String,Function,Boolean,Object],default:void 0},wrapClassName:String,wrapStyle:S(),zIndex:Number,mask:P(!0),maskClosable:P(!0),maskStyle:S(),maskProps:Object,keyboard:P(!0),title:[String,Object],footer:[String,Object],closable:P(!0),closeIcon:[String,Object],focusTriggerAfterClose:P(!0),width:[String,Number],height:[String,Number],centered:P(),transitionName:String,maskTransitionName:String,animation:String,maskAnimation:String,mousePosition:S(),onClose:ce(),afterClose:ce(),modalRender:Function}),Z=(e,n)=>{const t={...e};return Object.keys(n).forEach(l=>{const s=t[l];if(s)s.type||s.default?s.default=n[l]:s.def?s.def(n[l]):t[l]={type:s,default:n[l]};else throw new Error(`not have ${l} prop`)}),t};function Be(e,n){const t={...e};return n.forEach(l=>{delete t[l]}),t}function Oe(){if(typeof document>"u")return 0;const e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e);const n=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),n}function Ve(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}class de{static lockCount=0;static originalBodyStyle={};static lock(){if(this.lockCount===0){this.originalBodyStyle={overflow:document.body.style.overflow,width:document.body.style.width,paddingRight:document.body.style.paddingRight};const n=Oe(),t=Ve();if(document.body.style.overflow="hidden",t&&n>0){const l=parseInt(window.getComputedStyle(document.body).paddingRight||"0",10);document.body.style.paddingRight=`${l+n}px`}}this.lockCount++}static unlock(){this.lockCount=Math.max(0,this.lockCount-1),this.lockCount===0&&(document.body.style.overflow=this.originalBodyStyle.overflow||"",document.body.style.width=this.originalBodyStyle.width||"",document.body.style.paddingRight=this.originalBodyStyle.paddingRight||"")}}function $e(e){const n=o.ref(!1),t=()=>{!n.value&&e()&&(de.lock(),n.value=!0)},l=()=>{n.value&&(de.unlock(),n.value=!1)};return o.onUnmounted(()=>{l()}),{lock:t,unlock:l,isLocked:n.value}}function ve(e){const{lock:n,unlock:t}=$e(()=>!0);return o.watch(e,l=>{l?n():t()},{immediate:!0}),{lock:n,unlock:t}}function Me(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!o.isVNode(e)}const Re=o.defineComponent({name:"SimpleDialog",inheritAttrs:!1,props:Z(Te(),{prefixCls:"simple-dialog",mask:!0,visible:!1,keyboard:!0,closable:!0,maskClosable:!0,destroyOnClose:!1,focusTriggerAfterClose:!0}),setup(e,{attrs:n,slots:t,emit:l}){const s=o.ref(),a=o.ref(),d=o.ref(e.visible),c=o.ref();ve(()=>e.visible);const p=o.computed(()=>{const{width:r,height:m}=e,g={};return r!==void 0&&(g.width=typeof r=="number"?`${r}px`:r),m!==void 0&&(g.height=typeof m=="number"?`${m}px`:m),c.value&&(g.transformOrigin=c.value),g});o.watch(()=>e.visible,r=>{r&&(d.value=!0,o.nextTick(()=>{s.value&&s.value.focus()}))},{immediate:!0});const i=r=>{l("close",r)},u=o.shallowRef(!1),f=o.shallowRef(),C=()=>{clearTimeout(f.value),u.value=!0},b=()=>{f.value=setTimeout(()=>{u.value=!1})},T=r=>{if(e.maskClosable)if(u.value)u.value=!1;else{const m=r.target,g=s.value===m,k=m?.getAttribute?.("tabindex")==="0"&&m?.style?.outline==="none"&&s.value?.contains(m);(g||k)&&i(r)}},W=r=>{e.keyboard&&r.key==="Escape"&&(r.stopPropagation(),i())},H=r=>{d.value=!1,e.afterClose?.()},j=r=>{const m=r.getBoundingClientRect(),g={left:m.left,top:m.top},k=r.ownerDocument,O=k.defaultView||k.parentWindow,A=(F,D)=>{let w=F[`page${D?"Y":"X"}Offset`];const $=`scroll${D?"Top":"Left"}`;if(typeof w!="number"){const E=F.document;w=E.documentElement[$],typeof w!="number"&&(w=E.body[$])}return w};return g.left+=A(O),g.top+=A(O,!0),g},q=()=>{o.nextTick(()=>{if(a.value){const r=j(a.value);c.value=e.mousePosition?`${e.mousePosition.x-r.left}px ${e.mousePosition.y-r.top}px`:""}})},B=()=>{if(e.mousePosition&&a.value){const r=j(a.value),m=`${e.mousePosition.x-r.left}px ${e.mousePosition.y-r.top}px`;c.value!==m&&(c.value=m)}},V=o.computed(()=>{const{getContainer:r}=e;return r===!1?!1:typeof r=="function"?r():typeof r=="string"?document.querySelector(r):document.body});return()=>{const{prefixCls:r,mask:m,visible:g,destroyOnClose:k,maskTransitionName:O,zIndex:A,wrapClassName:F,rootClassName:D,wrapStyle:w,closable:$,maskProps:E,maskStyle:Y,transitionName:ne,title:I=t.title?.(),footer:Q=t.footer?.(),closeIcon:le=t.closeIcon?.(),width:ke,height:we,centered:re,modalRender:L,mousePosition:v}=e,{style:ie,class:se}=n,G=t.modalRender||L,U=m?o.createVNode(o.Transition,{name:O||"simple-fade",appear:!0},{default:()=>[g?o.createVNode("div",o.mergeProps({class:`${r}-mask`,style:{zIndex:A,...Y}},E),null):null]}):null,He=o.createVNode("div",{tabindex:-1,onKeydown:W,class:x(`${r}-wrap`,F,{[`${r}-centered`]:!!re}),ref:s,onClick:T,style:{zIndex:A,...w,display:d.value?void 0:"none"}},[o.createVNode(o.Transition,{name:ne||"simple-zoom",appear:!0,onBeforeEnter:q,onBeforeLeave:B,onAfterLeave:()=>H(!1)},{default:()=>[g||!k?o.withDirectives(o.createVNode("div",{ref:a,key:"dialog-element",role:"document",class:x(`${r}`,se),style:[p.value,ie],onMousedown:C,onMouseup:b},[o.createVNode("div",{tabindex:0,style:{outline:"none"},onClick:M=>{M.target===M.currentTarget&&(M.stopPropagation(),e.maskClosable&&i(M))}},[(()=>{const M=o.createVNode("div",{class:`${r}-content`},[$&&o.createVNode("button",{type:"button",onClick:i,"aria-label":"Close",class:`${r}-close`},[le||o.createVNode("span",{class:`${r}-close-x`},[o.createVNode("span",{class:`${r}-close-icon`},[o.createTextVNode("×")])])]),I&&o.createVNode("div",{class:`${r}-header`},[o.createVNode("div",{class:`${r}-title`},[I])]),o.createVNode("div",{class:`${r}-body`},[t.default?.()]),Q&&o.createVNode("div",{class:`${r}-footer`},[Q])]);return G?G({originVNode:M}):M})()]),o.createVNode("div",{tabindex:0,style:{width:"0px",height:"0px",overflow:"hidden",outline:"none"}},null)]),[[o.vShow,g]]):null]})]),J=o.createVNode("div",{class:x(`${r}-root`,D)},[U,He]);return V.value===!1?J:o.createVNode(o.Teleport,{to:V.value||document.body},Me(J)?J:{default:()=>[J]})}}}),je={key:0,class:"inline-flex items-center justify-center w-4 h-4 mr-2"},X=o.defineComponent({__name:"ButtonAdapter",props:{type:{default:"default"},danger:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:!1},disabled:{type:Boolean,default:!1},block:{type:Boolean,default:!1},htmlType:{default:"button"},href:{},target:{},title:{},icon:{}},emits:["click","mousedown"],setup(e,{emit:n}){const t=e,l=n,s=o.computed(()=>t.danger?"destructive":t.ghost?"ghost":t.type==="link"?"link":t.type==="dashed"?"outline":t.type==="text"?"ghost":(t.type==="primary","default")),a=o.computed(()=>{const i=t.loading;return typeof i=="object"&&i!==null?!0:!!i}),d=o.computed(()=>!!(t.icon||a.value)),c=i=>{if(t.disabled||a.value){i.preventDefault();return}l("click",i)},p=i=>{l("mousedown",i)};return(i,u)=>(o.openBlock(),o.createBlock(o.unref(Ne.Button),{as:i.href?"a":"button",variant:s.value,size:"default",class:o.normalizeClass({"w-full":i.block}),href:i.href,target:i.target,title:i.title,disabled:i.disabled||a.value,onClick:c,onMousedown:p},{default:o.withCtx(()=>[d.value?(o.openBlock(),o.createElementBlock("span",je,[a.value?(o.openBlock(),o.createBlock(o.unref(N.Loader2),{key:"loading",class:"h-4 w-4 animate-spin"})):i.icon?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(i.icon),{key:"icon",class:"h-4 w-4"})):o.createCommentVNode("",!0)])):o.createCommentVNode("",!0),o.renderSlot(i.$slots,"default")]),_:3},8,["as","variant","class","href","target","title","disabled"]))}}),_=(e,n,t)=>t!==void 0?t:`${e}-${n}`;function Ae(e,n,t,l){e.addEventListener&&e.addEventListener(n,t,l)}function Fe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}let ee=null;const De=e=>{ee={x:e.pageX,y:e.pageY},setTimeout(()=>ee=null,100)};Fe()&&Ae(document.documentElement,"click",De,!0);const oe=()=>ee,Ee=()=>({prefixCls:String,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:[String,Object],closable:{type:Boolean,default:void 0},closeIcon:[String,Object],onOk:Function,onCancel:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:[String,Object],okText:[String,Object],okType:String,cancelText:[String,Object],icon:[String,Object],maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:S(),cancelButtonProps:S(),destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:S(),maskStyle:S(),mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function,mousePosition:S()}),y=o.defineComponent({name:"SimpleModal",inheritAttrs:!1,props:Z(Ee(),{width:520,confirmLoading:!1,okType:"primary"}),setup(e,{emit:n,slots:t,attrs:l}){const s=e.prefixCls||"simple-modal",a="simple-dialog",d="simple",c=o.ref(null);o.watch(()=>e.open??e.visible,f=>{f&&(c.value=e.mousePosition??oe())},{immediate:!0});const p=f=>{e.confirmLoading||(n("update:visible",!1),n("update:open",!1),n("cancel",f),n("change",!1))},i=f=>{n("ok",f)},u=()=>{const{okText:f=t.okText?.(),okType:C,cancelText:b=t.cancelText?.(),confirmLoading:T}=e;return o.createVNode(o.Fragment,null,[o.createVNode(X,o.mergeProps({type:"dashed",onClick:p,disabled:T},e.cancelButtonProps),{default:()=>[b||"取消"]}),o.createVNode(X,o.mergeProps({type:C==="danger"?"primary":C,danger:C==="danger",loading:T,onClick:i},e.okButtonProps),{default:()=>[f||"确定"]})])};return()=>{const{prefixCls:f,visible:C,open:b,wrapClassName:T,centered:W,getContainer:H,closeIcon:j=t.closeIcon?.(),focusTriggerAfterClose:q=!0,confirmLoading:B,maskClosable:V=!0,...r}=e,m=x(T,{[`${s}-centered`]:!!W}),g=B?!1:V,k=B?!1:r.keyboard??!0,O=B?!1:r.closable??!0;return o.createVNode(Re,o.mergeProps(r,l,{class:x(l.class),getContainer:H,prefixCls:a,wrapClassName:m,visible:b??C,onClose:p,focusTriggerAfterClose:q,maskClosable:g,keyboard:k,closable:O,transitionName:_(d,"zoom",e.transitionName),maskTransitionName:_(d,"fade",e.maskTransitionName),mousePosition:c.value,modalRender:e.modalRender}),{...t,footer:t.footer||u,closeIcon:()=>o.createVNode("span",{class:`${s}-close-x`},[j||o.createVNode(N.X,{class:`${s}-close-icon`,size:16},null)])})}}});function K(e){return typeof e=="function"?e():e}const fe=o.defineComponent({name:"ConfirmDialog",props:["icon","onCancel","onOk","close","zIndex","afterClose","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","iconPrefixCls","style","mousePosition"],setup(e,{attrs:n}){const t=o.ref(!1),l=o.computed(()=>{const{icon:d,type:c}=e;return d?K(d):{info:o.createVNode(N.Info,{class:"w-6 h-6"},null),success:o.createVNode(N.CheckCircle,{class:"w-6 h-6"},null),error:o.createVNode(N.XCircle,{class:"w-6 h-6"},null),warning:o.createVNode(N.AlertTriangle,{class:"w-6 h-6"},null),warn:o.createVNode(N.AlertTriangle,{class:"w-6 h-6"},null),confirm:o.createVNode(N.HelpCircle,{class:"w-6 h-6"},null)}[c]||o.createVNode(N.HelpCircle,{class:"w-6 h-6 text-blue-500"},null)}),s=o.computed(()=>{const{okCancel:d,type:c}=e;return d??c==="confirm"}),a=async d=>{const{onOk:c,close:p}=e;if(c){t.value=!0;try{await c(d)!==!1&&p?.({triggerCancel:!1},d)}catch{}finally{t.value=!1}}else p?.({triggerCancel:!1},d)};return()=>{const{icon:d,onCancel:c,onOk:p,close:i,zIndex:u,afterClose:f,open:C,keyboard:b,centered:T,getContainer:W,maskStyle:H,okButtonProps:j,cancelButtonProps:q,okType:B="primary",prefixCls:V,width:r,mask:m=!0,maskClosable:g=!1,okText:k,cancelText:O,autoFocusButton:A="ok",transitionName:F,maskTransitionName:D,type:w,title:$,content:E,rootPrefixCls:Y,bodyStyle:ne,closeIcon:I,modalRender:Q,focusTriggerAfterClose:le,wrapClassName:ke,style:we,mousePosition:re}=e,L=`${V}-confirm`,v=`${L}`,ie=l.value,se=s.value&&o.createVNode(X,o.mergeProps({type:"dashed",onClick:U=>{t.value||i?.({triggerCancel:!0},U)},disabled:t.value},q),{default:()=>[O||"取消"]}),G=o.createVNode(X,o.mergeProps({type:B==="danger"?"primary":B,danger:B==="danger",loading:t.value,onClick:a},j),{default:()=>[k||(s.value?"确定":"知道了")]});return o.createVNode(y,{prefixCls:V,class:x(L,`${L}-${w}`,n.class),wrapClassName:x({[`${L}-centered`]:!!T},ke),onCancel:U=>{t.value||i?.({triggerCancel:!0},U)},open:C,title:"",footer:"",confirmLoading:t.value,transitionName:_(Y,"zoom",F),maskTransitionName:_(Y,"fade",D),mask:m,maskClosable:t.value?!1:g,maskStyle:H,style:we,bodyStyle:ne,width:r,zIndex:u,afterClose:f,keyboard:t.value?!1:b,centered:T,getContainer:W||void 0,closable:!1,closeIcon:typeof I=="function"?I():I,modalRender:Q,focusTriggerAfterClose:le,mousePosition:re},{default:()=>[o.createVNode("div",{class:`${v}-body-wrapper`},[o.createVNode("div",{class:x(`${v}-body`,`${v}-${w}`)},[K(ie),$===void 0?null:o.createVNode("span",{class:`${v}-title`},[K($)]),o.createVNode("div",{class:`${v}-content`},[K(E)])]),o.createVNode("div",{class:`${v}-btns`},[se,G])])]})}}});function Ie(e,n,t){e&&e.component&&(Object.assign(e.component.props,n),e.component.update())}const R=[],z=e=>{const n=document.createDocumentFragment();let t={...Be(e,["appContext"]),close:a,open:!0,mousePosition:oe()},l=null;function s(...i){l&&(o.render(null,n),l=null);const u=i.some(f=>f&&f.triggerCancel);e.onCancel&&u&&e.onCancel(()=>{},...i.slice(1));for(let f=0;f<R.length;f++)if(R[f]===a){R.splice(f,1);break}}function a(...i){t={...t,open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),s.apply(this,i)}},t.visible&&delete t.visible,d(t)}function d(i){typeof i=="function"?t=i(t):t={...t,...i},l&&Ie(l,t)}const c=i=>{const u="simple",f=i.prefixCls||`${u}-modal`;return o.createVNode(fe,o.mergeProps(i,{rootPrefixCls:u,prefixCls:f,iconPrefixCls:"simple-icon",cancelText:i.cancelText||"取消"}),null)};function p(i){const u=o.createVNode(c,{...i});return u.appContext=e.appContext||u.appContext,o.render(u,n),u}return l=p(t),R.push(a),{destroy:a,update:d}};function ue(e){return{...e,type:"warning"}}function me(e){return{...e,type:"info"}}function pe(e){return{...e,type:"success"}}function ge(e){return{...e,type:"error"}}function ye(e){return{...e,type:"confirm"}}const Le=o.defineComponent({name:"HookModal",inheritAttrs:!1,props:Z({config:Object,afterClose:Function,destroyAction:Function,open:{type:Boolean,default:void 0}},{config:{}}),setup(e,{expose:n}){const t="simple",l=o.computed(()=>e.config.prefixCls||`${t}-modal`),s="simple-icon",a=()=>{e.afterClose()};return n({destroy:()=>{e.destroyAction()},update:p=>{Object.assign(e.config,p)}}),()=>o.createVNode(fe,o.mergeProps(e.config,{close:e.destroyAction,open:e.open,afterClose:a,rootPrefixCls:t,prefixCls:l.value,iconPrefixCls:s,mousePosition:e.config.mousePosition||oe()}),null)}});let Ce=0;const ze=o.defineComponent({name:"ElementsHolder",inheritAttrs:!1,setup(e,{expose:n}){const t=o.shallowRef([]);return n({addModal:s=>(t.value.push(s),t.value=t.value.slice(),()=>{t.value=t.value.filter(a=>a!==s)})}),()=>t.value.map(s=>s())}});function be(){const e=o.shallowRef(),n=o.shallowRef([]);o.watch(e,()=>{e.value&&(n.value.forEach(s=>s()),n.value=[])},{immediate:!0});const t=s=>function(d){Ce+=1;const c=o.shallowRef(),p=o.shallowRef(!0);let i;const u=()=>{const b=o.computed(()=>s(o.unref(d)));return o.createVNode(Le,{key:`modal-${Ce}`,config:b.value,ref:c,open:p.value,destroyAction:()=>{p.value=!1},afterClose:()=>{i?.(),b.value.afterClose?.()}},null)};return e.value?i=e.value.addModal(u):n.value.push(()=>{i=e.value.addModal(u)}),{destroy:()=>{c.value?c.value.destroy():p.value=!1},update:b=>{c.value&&c.value.update(b)}}},l={info:t(me),success:t(pe),error:t(ge),warning:t(ue),confirm:t(ye)};return l.warn=l.warning,[l,()=>o.createVNode(ze,{ref:e},null)]}function he(e){return z(ue(e))}y.useModal=be,y.info=function(n){return z(me(n))},y.success=function(n){return z(pe(n))},y.error=function(n){return z(ge(n))},y.warning=he,y.warn=he,y.confirm=function(n){return z(ye(n))},y.destroyAll=function(){for(;R.length;){const n=R.pop();n&&n()}},y.install=function(e){return e.component(y.name||"Modal",y),e};const te=Pe(y),We={Modal:te,install(e){return e.use(te),e}};h.Modal=te,h.default=We,h.useModal=be,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
